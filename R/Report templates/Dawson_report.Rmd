---
title: "Dawson Break-Up Report `r lubridate::year(Sys.Date())`"
subtitle: " <br><br>"
date: "Prepared on `r Sys.Date()`"
output: 
  word_document:
      reference_docx: ../style_template.docx
      toc: true
      toc_depth: 3
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyhydat)
library(tidyhydat.ws)
source("../Hydrometric_Level_mASL.R")
source("../Hydrometric_Flow.R")
```

This report is generated by the Yukon Government based on data pulled from the [Real-Time Hydrometric Data](https://wateroffice.ec.gc.ca/mainmenu/real_time_data_index_e.html) published by the Government of Canada. This report is based on data downloaded at `r .POSIXct(Sys.time(), tz="America/Whitehorse")` Yukon time.

\newpage

# Current Status and Observations

[Enter update here]

\newpage

# Station data

Water level and flow data is listed below in order of historical relative importance to flooding.

In the future, the order of listing could depend instead on which stations is highest in relation to historical levels.

### Yukon River at Dawson (Station 09EB001)

```{r Yukon at Dawson, echo=FALSE, message=FALSE, warning=FALSE, fig.width=6.5, results='asis'}

station <- "09EB001"
station_info <- tidyhydat::hy_stations(station)
levelData <- level_data(
  station_number = station,
  extract_realtime = TRUE,
  select_years = lubridate::year(Sys.Date())
)
startYear <- min(lubridate::year(levelData[[1]]$Date), na.rm = T)

today <- levelData[[3]]$Value[levelData[[3]]$Date==Sys.Date()]
todayPerc <- round(levelData[[3]]$prctile[levelData[[3]]$Date==Sys.Date()],2)
yesterday <- levelData[[3]]$Value[levelData[[3]]$Date==(Sys.Date()-1)]

cat("  \n The current level is ", round(today,3)," meters above sea level which corresponds to the ", todayPerc, " percentile of historic levels for this station. Since yesterday, the level has ", ifelse(today<yesterday, "decreased", "increased"), "by ", round(abs(today-yesterday), 3)," meters.")

levelPlot <- level_plot(
  station_number = station,
  complete_year = levelData[[2]],
	plot_years_df = levelData[[3]],
	dummy_year_df = levelData[[4]],
)
levelPlot
  
cat("  \n This station is located in ", station_info$PROV_TERR_STATE_LOC, " at longitude ", round(station_info$LONGITUDE, 2), ", latitude ", round(station_info$LATITUDE,2), ". Data collection began in ", startYear, " and the historic data are ", spatstat.utils::percentage(sum(stats::complete.cases(levelData[[1]]))/nrow(levelData[[1]])), " complete.")
```

## Klondike River at Bonanza Creek

## Klondike River at Rock Creek

## North Klondike River

## Yukon River Above White River

## White River Above Yukon River

## Stewart River Above Yukon River

## Indian River

## 60 Mile River

## Little South Klondike River

# Dawson Weather Forecast

# Still images

## White River at Yukon River (automated)

## Yukon River at Dawson

This to be filled in later, once the camera exists

## Other images
